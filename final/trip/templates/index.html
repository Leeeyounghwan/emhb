{% load static %}
{% load humanize %}
<!doctype html>
<html class="no-js" lang="zxx">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Travel HTML-5 Template </title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="manifest" href="site.webmanifest">
		<link rel="shortcut icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">

		<!-- CSS here -->
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/flaticon.css' %}">
        <link rel="stylesheet" href="{% static 'css/slicknav.css' %}">
        <link rel="stylesheet" href="{% static 'css/animate.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/magnific-popup.css' %}">
        <link rel="stylesheet" href="{% static 'css/fontawesome-all.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/themify-icons.css' %}">
        <link rel="stylesheet" href="{% static 'css/slick.css' %}">
        <link rel="stylesheet" href="{% static 'css/nice-select.css' %}">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <link rel="stylesheet" href="{% static 'admin_vendor/fontawesome-free/css/all.min.css'%}">
        <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
        
        <!-- Kakao Map API-->
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7d5511716523c9fb7d55def390e73d6a&libraries=services"></script>
   </head>
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="preloader-circle"></div>
                <div class="preloader-img pere-text">
                    <img src="{% static 'img/logo.png' %}" alt="">
                </div>
            </div>
        </div>
    </div>
    <!-- Preloader Start -->
    <header>
        <!-- Header Start -->
        {% include "nav.html" %}
        <!-- Header End -->
    </header>

    <main>
        <!-- slider Area Start-->
        <div class="slider-area ">
            <!-- Mobile Menu -->
            <div class="slider-active">
                <div class="single-slider hero-overly  slider-height d-flex align-items-center" data-background="{% static 'img/main_backround.jpg' %}" style="background-image: url(&quot;/../img/main_backround.jpeg&quot;);">
                    <div class="container">
                        <div class="row">
                            <div class="col-xl-9 col-lg-9 col-md-9">
                                <div class="hero__caption">
                                    <h1>어디로 <span>가고 싶으신가요?!</span> </h1>
                                    <p>검색창에 가고 싶은 지역을 검색해서 동행을 찾아보세요!</p>
                                </div>
                            </div>
                        </div>
                        <!-- Search Box -->
                        <div class="row">
                            <div class="col-xl-12">
                                <!-- form -->
                                <form method="POST" action="{% url 'trip:search_trip' %}" class="search-box">
                                    {% csrf_token %}
                                    <div class="input-form mb-30">
                                        <input type="text" placeholder="어디로 가고 싶으신가요?" name="region">
                                    </div>
                                    <div class="search-form mb-30">
                                        <button type="submit" value="search" name="action">SEARCH</button>
                                    </div>	
                                </form>	
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- slider Area End-->
        <!-- Our Services Start -->
        <div class="our-services servic-padding">
            <div class="container">
                <div class="row d-flex justify-contnet-center">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6">
                        <div class="single-services text-center mb-30">
                            <div class="services-ion">
                                <span class="flaticon-tour"></span>
                            </div>
                            <div class="services-cap">
                                <h5>사용자와 함께<br>만들어가는 문화</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6">
                        <div class="single-services text-center mb-30">
                            <div class="services-ion">
                                <span class="flaticon-pay"></span>
                            </div>
                            <div class="services-cap">
                                <h5>100% 함께 할 수 있는<br>동행</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6">
                        <div class="single-services text-center mb-30">
                            <div class="services-ion">
                                <span class="flaticon-experience"></span>
                            </div>
                            <div class="services-cap">
                                <h5>다양한 사람들과<br>함께하는 여행</h5>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-6">
                        <div class="single-services text-center mb-30">
                            <div class="services-ion">
                                <span class="flaticon-good"></span>
                            </div>
                            <div class="services-cap">
                                <h5>사용자들의 선호도가<br>높은 사이트</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
         <!-- Our Services End -->
        <!-- 동행 모집글 Start -->
        <div class="favourite-place place-padding">
            <div class="container">
                <!-- Section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle text-center">
                            <span>다양한 동행 모집 게시글</span>
                            <h2>같이 여행가요!</h2>
                        </div>
                    </div>
                </div>
                <div class="row">
                    {% if posts %}
                      {%for item in posts %}
                      <div class="col-xl-4 col-lg-4 col-md-6">
                          <div class="single-place mb-30">                        
                              <!-- Map image -->
                              <div class="place-img" style="width:100%;">
                                <div class="map_image" id="map_image" style="height:220px; width:100%; background-color:gray;"></div>
                                
                              </div>
      
                              <input type="text" class="lng" id="lng" value='{{item.post_lnt}}' style="display:none;">
                              <input type="text" class='lat' id="lat" value='{{item.post_lat}}' style="display:none;">
                              
                              <div class="place-cap" style="width:100%; padding-right:0px; padding-left:0px;">
                                  <div class="place-cap-top" style="width:100%;">
                                      <h3><a href="{% url 'trip:together_detail' item.id %}">{{ item.post_title|truncatechars:12 }}</a></h3>
                                      <p class="dolor">{{ item.post_content|truncatechars:15 }}</p>
                                      <p class="dolor">{{ item.recuited_people }}<span>명 모집중 / {{ item.region }}</span></p>
                                  </div>
      
                                  <div class="place-cap-bottom" style="width:100%;">
                                      <ul>
                                        <li><span>여행기간</span></li>
                                          <li><i class="far fa-clock"> <span> </span> {{ item.start_date }}<span> ~ </span>{{ item.end_date }}</i></li>
                                      </ul>
                                  </div>
                                  <div class="place-cap-bottom">
                                    <ul class="blog-info-link">
                                      <li style="margin-right: 10px; width:30px; height:30px;"><img class="img-profile rounded-circle" src="{% static 'img/undraw_profile.svg' %}"></li>
                                      <li style="font-size: 14px;">{{ item.user_id }}</li>
                                    </ul>
                                </div>
                              </div>
                          </div>
                      </div>
                      {% endfor %}
                    {% else %}
                      <div class="no-search-result" style="height: 20rem;"> 조회된 결과가 없습니다.<br>지역명으로 검색해주세요.</div>
                    {% endif %}
                  </div>
            </div>
        </div>
        <!-- 동행모집글 End -->
        
        <!-- Testimonial Start -->
        <div class="testimonial-area testimonial-padding" data-background="{% static 'img/testmonial/testimonial_bg.jpg' %}">
            <div class="container ">
                <div class="row d-flex justify-content-center">
                    <div class="col-xl-11 col-lg-11 col-md-9">
                        <div class="h1-testimonial-active">
                            <!-- Single Testimonial -->
                            <div class="single-testimonial text-center">
                                <!-- Testimonial Content -->
                                <div class="testimonial-caption ">
                                    <div class="testimonial-top-cap">
                                        <img src="{% static 'img/icon/testimonial.png' %}" alt="">
                                        <p>아래는 저희 사이트와 제휴를 맺은 업체들의 여행 상품 입니다.<br>
                                            여행 일정을 계획하는게 귀찮다면 아래의 상품들로 여행을 떠나보세요!
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Testimonial End -->
        <!-- Blog Area Start -->
        <div class="favourite-place place-padding">
            <div class="container">
                <!-- Section Tittle -->
                <div class="row">
                    <div class="col-lg-12">
                        <div class="section-tittle text-center">
                            <span>Go Trip에서 엄선한</span>
                            <h2>인기여행상품</h2>
                        </div>
                    </div>
                </div>

                
                <div class="row">
                    {%for package in packages %}
                    <div class="col-xl-4 col-lg-4 col-md-6">
                        <div class="single-place mb-30">
                            <div class="place-img" style="height:220px; width:100%">
                                {% if package.image %}
                                    <a href="{% url 'trip:package_detail' package.id%}"><img src="{{ package.image.url }}" alt="{{ package.destination }}"></a>
                                {% endif %}
                            </div>

                            <div class="place-cap">
                                <div class="place-cap-top">
                                    <span><i class="fas fa-star"></i><span>8.0superb</span></span>
                                    <h3><a href="#">{{ package.title }}</a></h3>
                                    <p class="dolor">{{ package.content }}</p>
                                    <p class="dolor">{{ package.price|intcomma }}원<span>/ 인원 당</span></p>
                                </div>

                                <div class="place-cap-bottom">
                                    <ul>
                                        <li><i class="far fa-clock">{{ package.start_date }}</i></li>
                                        <!-- 날짜계산기를 이용하기 위해 숨김값으로 가져옴 -->
                                        <li><i class="far fa-clock" style="display:none">{{ package.end_date }}</i></li>
                                        <li><i class="fas fa-map-marker-alt"></i>{{ package.destination }}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- Blog Area End -->

        {% include "chat/chat_merge.html" %}

    </main>
    {% include 'footer.html'%}

	<!-- JS here -->
    <script>
        var lng = document.getElementById('lng').value;
        var lat = document.getElementById('lat').value;
  
        console.log(lng, lat);
  
        // JavaScript 코드 수정
        var staticMapContainers = document.querySelectorAll('.col-xl-4.col-lg-4.col-md-6 .place-img');
        staticMapContainers.forEach(function(container, index) {
        var staticMapContainer = document.getElementById('map_image');      
        staticMapContainer.id = 'staticMap' + (index + 1); // 각 요소에 고유한 ID 할당
          
          var staticMapContainers1 = document.querySelectorAll('.map_image');
          
          staticMapContainers1.forEach(function(container, index) {
          var staticMapContainer1 = document.getElementById('staticMap1');
          
              // 이미지 지도에서 마커가 표시될 위치입니다
          var markerPosition  = new kakao.maps.LatLng(37.566826004661, 126.978652258309);
  
      // 이미지 지도에 표시할 마커입니다
      // 이미지 지도에 표시할 마커는 Object 형태입니다
      var marker = {
          position: markerPosition
        }
  
      var staticMapOption = {
          center: new kakao.maps.LatLng(37.566826004661, 126.978652258309), // 이미지 지도의 중심 좌표
          level: 5, // 이미지 지도의 확대 레벨
          marker: marker // 이미지 지도에 표시할 마커
        };
  
      // 이미지 지도를 표시할 div와 옵션으로 이미지 지도를 생성합니다
      var staticMap = new kakao.maps.StaticMap(staticMapContainer, staticMapOption);
  
        });
  
        container.appendChild(staticMapContainer);       
      });
  
      {% comment %} // Map
      var staticMapContainer = document.getElementById('staticMap');
  
      // 이미지 지도에서 마커가 표시될 위치입니다
      var markerPosition  = new kakao.maps.LatLng(37.566826004661, 126.978652258309);
  
      // 이미지 지도에 표시할 마커입니다
      // 이미지 지도에 표시할 마커는 Object 형태입니다
      var marker = {
          position: markerPosition
        }
  
      var staticMapOption = {
          center: new kakao.maps.LatLng(37.566826004661, 126.978652258309), // 이미지 지도의 중심 좌표
          level: 5, // 이미지 지도의 확대 레벨
          marker: marker // 이미지 지도에 표시할 마커
        };
  
      // 이미지 지도를 표시할 div와 옵션으로 이미지 지도를 생성합니다
      var staticMap = new kakao.maps.StaticMap(staticMapContainer, staticMapOption); {% endcomment %}
      </script>




		<!-- All JS Custom Plugins Link Here here -->
        <script src="{% static 'js/vendor/modernizr-3.5.0.min.js' %}"></script>
		
		<!-- Jquery, Popper, Bootstrap -->
		<script src="{% static 'js/vendor/jquery-1.12.4.min.js' %}"></script>
        <script src="{% static 'js/popper.min.js' %}"></script>
        <script src="{% static 'js/bootstrap.min.js' %}"></script>
	    <!-- Jquery Mobile Menu -->
        <script src="{% static 'js/jquery.slicknav.min.js' %}"></script>

		<!-- Jquery Slick , Owl-Carousel Plugins -->
        <script src="{% static 'js/owl.carousel.min.js' %}"></script>
        <script src="{% static 'js/slick.min.js' %}"></script>
		<!-- One Page, Animated-HeadLin -->
        <script src="{% static 'js/wow.min.js' %}"></script>
		<script src="{% static 'js/animated.headline.js' %}"></script>
        <script src="{% static 'js/jquery.magnific-popup.js' %}"></script>

		<!-- Scrollup, nice-select, sticky -->
        <script src="{% static 'js/jquery.scrollUp.min.js' %}"></script>
        <script src="{% static 'js/jquery.nice-select.min.js' %}"></script>
		<script src="{% static 'js/jquery.sticky.js' %}"></script>
        
        <!-- contact js -->
        <script src="{% static 'js/contact.js' %}"></script>
        <script src="{% static 'js/jquery.form.js' %}"></script>
        <script src="{% static 'js/jquery.validate.min.js' %}"></script>
        <script src="{% static 'js/mail-script.js' %}"></script>
        <script src="{% static 'js/jquery.ajaxchimp.min.js' %}"></script>
        
		<!-- Jquery Plugins, main Jquery -->	
        <script src="{% static 'js/plugins.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>

        <!-- ChatBot -->
        {% comment %} <script src="{% static 'js/chatbot.js' %}"></script> {% endcomment %}

    </body>
</html>